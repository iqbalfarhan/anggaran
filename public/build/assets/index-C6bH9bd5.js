import{R as g,j as m,r as l}from"./app-BuhxccM0.js";import{c as w,u as $}from"./index-CBhX-8Et.js";import{c as j}from"./index-Bx0j57Td.js";import{u as P,c as G}from"./index-BAWRJvX3.js";import{a as J}from"./index-Bv-dS6vY.js";import{P as L}from"./index-B5hUVbp2.js";import{u as Q}from"./index-qNTxaieP.js";import{u as W}from"./index-B3QAqErv.js";function X(e){const r=e+"CollectionProvider",[i,n]=j(r),[A,v]=i(r,{collectionRef:{current:null},itemMap:new Map}),I=f=>{const{scope:o,children:a}=f,d=g.useRef(null),t=g.useRef(new Map).current;return m.jsx(A,{scope:o,itemMap:t,collectionRef:d,children:a})};I.displayName=r;const R=e+"CollectionSlot",_=G(R),p=g.forwardRef((f,o)=>{const{scope:a,children:d}=f,t=v(R,a),c=P(o,t.collectionRef);return m.jsx(_,{ref:c,children:d})});p.displayName=R;const s=e+"CollectionItemSlot",C="data-radix-collection-item",E=G(s),b=g.forwardRef((f,o)=>{const{scope:a,children:d,...t}=f,c=g.useRef(null),T=P(o,c),x=v(s,a);return g.useEffect(()=>(x.itemMap.set(c,{ref:c,...t}),()=>void x.itemMap.delete(c))),m.jsx(E,{[C]:"",ref:T,children:d})});b.displayName=s;function F(f){const o=v(e+"CollectionConsumer",f);return g.useCallback(()=>{const d=o.collectionRef.current;if(!d)return[];const t=Array.from(d.querySelectorAll(`[${C}]`));return Array.from(o.itemMap.values()).sort((x,y)=>t.indexOf(x.ref.current)-t.indexOf(y.ref.current))},[o.collectionRef,o.itemMap])}return[{Provider:I,Slot:p,ItemSlot:b},F,n]}var N="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[O,K,ee]=X(h),[oe,Ce]=j(h,[ee]),[te,re]=oe(h),k=l.forwardRef((e,r)=>m.jsx(O.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(O.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(ne,{...e,ref:r})})}));k.displayName=h;var ne=l.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:i,orientation:n,loop:A=!1,dir:v,currentTabStopId:I,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:_,onEntryFocus:p,preventScrollOnEntryFocus:s=!1,...C}=e,E=l.useRef(null),b=P(r,E),F=W(v),[f,o]=$({prop:I,defaultProp:R??null,onChange:_,caller:h}),[a,d]=l.useState(!1),t=Q(p),c=K(i),T=l.useRef(!1),[x,y]=l.useState(0);return l.useEffect(()=>{const u=E.current;if(u)return u.addEventListener(N,t),()=>u.removeEventListener(N,t)},[t]),m.jsx(te,{scope:i,orientation:n,dir:F,loop:A,currentTabStopId:f,onItemFocus:l.useCallback(u=>o(u),[o]),onItemShiftTab:l.useCallback(()=>d(!0),[]),onFocusableItemAdd:l.useCallback(()=>y(u=>u+1),[]),onFocusableItemRemove:l.useCallback(()=>y(u=>u-1),[]),children:m.jsx(L.div,{tabIndex:a||x===0?-1:0,"data-orientation":n,...C,ref:b,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{T.current=!0}),onFocus:w(e.onFocus,u=>{const Y=!T.current;if(u.target===u.currentTarget&&Y&&!a){const D=new CustomEvent(N,Z);if(u.currentTarget.dispatchEvent(D),!D.defaultPrevented){const M=c().filter(S=>S.focusable),H=M.find(S=>S.active),q=M.find(S=>S.id===f),z=[H,q,...M].filter(Boolean).map(S=>S.ref.current);V(z,s)}}T.current=!1}),onBlur:w(e.onBlur,()=>d(!1))})})}),U="RovingFocusGroupItem",B=l.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:i,focusable:n=!0,active:A=!1,tabStopId:v,children:I,...R}=e,_=J(),p=v||_,s=re(U,i),C=s.currentTabStopId===p,E=K(i),{onFocusableItemAdd:b,onFocusableItemRemove:F,currentTabStopId:f}=s;return l.useEffect(()=>{if(n)return b(),()=>F()},[n,b,F]),m.jsx(O.ItemSlot,{scope:i,id:p,focusable:n,active:A,children:m.jsx(L.span,{tabIndex:C?0:-1,"data-orientation":s.orientation,...R,ref:r,onMouseDown:w(e.onMouseDown,o=>{n?s.onItemFocus(p):o.preventDefault()}),onFocus:w(e.onFocus,()=>s.onItemFocus(p)),onKeyDown:w(e.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){s.onItemShiftTab();return}if(o.target!==o.currentTarget)return;const a=ae(o,s.orientation,s.dir);if(a!==void 0){if(o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return;o.preventDefault();let t=E().filter(c=>c.focusable).map(c=>c.ref.current);if(a==="last")t.reverse();else if(a==="prev"||a==="next"){a==="prev"&&t.reverse();const c=t.indexOf(o.currentTarget);t=s.loop?ie(t,c+1):t.slice(c+1)}setTimeout(()=>V(t))}}),children:typeof I=="function"?I({isCurrentTabStop:C,hasTabStop:f!=null}):I})})});B.displayName=U;var ce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function se(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ae(e,r,i){const n=se(e.key,i);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ce[n]}function V(e,r=!1){const i=document.activeElement;for(const n of e)if(n===i||(n.focus({preventScroll:r}),document.activeElement!==i))return}function ie(e,r){return e.map((i,n)=>e[(r+n)%e.length])}var be=k,Se=B;export{Se as I,be as R,Ce as a,X as c};
