import{r as b,a as P,j as e,L as I}from"./app-anM-gZ2u.js";import{H as z}from"./heading-small-BnVMvyB3.js";import{M as F}from"./markdown-reader-i0u1iSIr.js";import{B as Y}from"./badge-C0P4Ovgj.js";import{c as D,B as r}from"./createLucideIcon-BioKLKX7.js";import{C as S}from"./checkbox-BtSDFpfQ.js";import{I as B}from"./input-ClfOI950.js";import{L as N}from"./label-C8G4Cnnr.js";import{T as f,P as E,a as _,b as $}from"./transaksi-form-sheet-BUjQ_9NT.js";import{T as A,a as H,b as h,c as d,d as O,e as t}from"./table-BoS0xxu7.js";import{u as R,T as U}from"./use-view-mode-BE8xcY4c.js";import{A as J}from"./app-layout-DN7FZeuy.js";import{g as V,d as k,h as W,s as q,f as T,a as K}from"./utils-Pwra_gJf.js";import G from"./project-form-sheet-DMy_C5PL.js";import Q from"./transaksi-bulk-delete-dialog-CQmPkKS7.js";import X from"./transaksi-bulk-edit-sheet-ClKGX1-L.js";import Z from"./transaksi-delete-dialog-CjVDCyqK.js";import ee from"./transaksi-item-card-DSLnxS64.js";import se from"./transaksi-stat-widget-B24t6z_s.js";import re from"./transaksi-upload-sheet-Dn8setko.js";import{S as y}from"./square-pen-CrjIyrP9.js";import{T as M}from"./trash-2-B4PjQKXB.js";import{P as ie}from"./plus-bTdug0-a.js";import{F as te}from"./folder-B2LRf7jy.js";/* empty css            */import"./index-BHJU855m.js";import"./index-CqHEZmET.js";import"./index-6TxovVEZ.js";import"./index-tkLrXI5P.js";import"./index-DfYHHzgK.js";import"./index-DzuaZqSn.js";import"./check-X5a9n9GQ.js";import"./chevron-right-DENebv_t.js";import"./select-DLlcs4UA.js";import"./index-BDRgNheF.js";import"./index-CbA_e4WE.js";import"./index-D4AgSKuP.js";import"./index-nzUc_GAa.js";import"./index-BdQq_4o_.js";import"./index-B9nn0GvT.js";import"./calendar-DJbO1J_a.js";import"./form-control-Dj9hg2hI.js";import"./submit-button-nAPFLybW.js";import"./loader-circle-CKA1gowg.js";import"./scroll-area-C5tCGvq1.js";import"./sheet-BbbadrY6.js";import"./textarea-B-IGZNd1.js";import"./use-mobile-1OJeYdmt.js";import"./card-B3S_K6RW.js";import"./theme-toggler-B3_fQzIm.js";import"./sidebar-7zpzTDSN.js";import"./app-logo-icon-CTMYMHyL.js";import"./avatar-BU_ohGqV.js";import"./alert-dialog-BVXi17Tw.js";import"./arrow-left-BBdw3AfB.js";import"./transaksi-group-chart-ClE6h-J2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ae=D("Copy",oe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ne=D("Image",ce),ms=({transaksis:x,project:j})=>{const{mode:v,toggle:L}=R(),[o,c]=b.useState([]),[g,w]=b.useState(""),{permissions:l}=P().props,C=V(x,"date");return e.jsxs(J,{title:`Transaksi ${j?`- ${j.name}`:""}`,description:"Manage your transaksis",actions:e.jsxs(e.Fragment,{children:[l?.canUpdateProject&&e.jsx(G,{purpose:"edit",project:j,children:e.jsxs(r,{children:[e.jsx(y,{})," Edit project"]})}),e.jsxs(r,{onClick:L,children:[e.jsx(U,{}),K(v)]})]}),children:[e.jsx(se,{}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[e.jsx(B,{placeholder:"Search transaksis...",value:g,onChange:a=>w(a.target.value)}),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{variant:"ghost",disabled:!0,children:[o.length," item selected"]}),e.jsx(X,{transaksiIds:o,onSuccess:()=>c([]),children:e.jsxs(r,{children:[e.jsx(y,{})," Edit selected"]})}),e.jsx(Q,{transaksiIds:o,onSuccess:()=>c([]),children:e.jsxs(r,{variant:"destructive",children:[e.jsx(M,{})," Delete selected"]})})]}),l?.canAdd&&e.jsx(f,{purpose:"create",children:e.jsxs(r,{children:[e.jsx(ie,{}),"Transaksi baru"]})})]}),v=="table"?e.jsxs(A,{children:[e.jsx(H,{children:e.jsxs(h,{children:[e.jsx(d,{children:e.jsx(r,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(N,{children:e.jsx(S,{checked:o.length===x.length,onCheckedChange:a=>{c(a?x.map(m=>m.id):[])}})})})}),e.jsx(d,{children:"Tanggal"}),e.jsx(d,{children:"Tags"}),e.jsx(d,{children:"Kegiatan"}),e.jsx(d,{children:"Nominal"}),e.jsx(d,{className:"text-center",children:"Actions"})]})}),e.jsx(O,{children:Object.entries(C).map(([a,m])=>(()=>{const n=m.filter(s=>JSON.stringify(s).toLowerCase().includes(g.toLowerCase())),p=n.reduce((s,i)=>s+(i.price??0),0);return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"bg-muted/50",children:e.jsx(t,{colSpan:6,className:"text-center opacity-50",children:k(a).format("dddd, DD MMMM YYYY")})},a),n.map(s=>e.jsxs(h,{children:[e.jsx(t,{children:e.jsx(r,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(N,{children:e.jsx(S,{checked:o.includes(s.id),onCheckedChange:i=>{c(i?[...o,s.id]:o.filter(u=>u!==s.id))}})})})}),e.jsx(t,{children:W(s.date)}),e.jsx(t,{children:s.tags?.map(i=>e.jsx(Y,{children:i}))}),e.jsx(t,{children:e.jsxs(E,{children:[e.jsx(_,{children:q(s.name)}),e.jsx($,{children:e.jsx(F,{content:s.description,className:"prose-sm"})})]})}),e.jsx(t,{children:T(s.price)}),e.jsxs(t,{className:"text-center",children:[l?.canShow&&e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(I,{href:route("transaksi.show",s.id),children:e.jsx(te,{})})}),l?.canUpdate&&e.jsxs(e.Fragment,{children:[e.jsx(re,{transaksi:s,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(ne,{})})}),e.jsx(f,{purpose:"duplicate",transaksi:s,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(ae,{})})}),e.jsx(f,{purpose:"edit",transaksi:s,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(y,{})})})]}),l?.canDelete&&e.jsx(Z,{transaksi:s,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(M,{})})})]})]},s.id)),n.length>0&&e.jsxs(h,{className:"bg-muted/30",children:[e.jsx(t,{colSpan:4}),e.jsx(t,{className:"font-semibold",children:T(p)}),e.jsxs(t,{className:"text-center opacity-70",children:["Total ",n.length]})]})]})})())})]}):e.jsx("div",{className:"space-y-10",children:Object.entries(C).map(([a,m],n)=>{const p=m.filter(i=>JSON.stringify(i).toLowerCase().includes(g.toLowerCase())),s=p.reduce((i,u)=>i+(u.price??0),0);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{title:k(a).format("dddd, DD MMMM YYYY"),description:p.length>0?`Total pengeluaran: ${T(s)}`:void 0}),e.jsx("div",{className:"grid-responsive grid gap-4",children:p.map(i=>e.jsx(ee,{transaksi:i},i.id))})]},n)})})]})};export{ms as default};
